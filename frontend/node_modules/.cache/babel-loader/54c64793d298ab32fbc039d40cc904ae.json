{"ast":null,"code":"var _jsxFileName = \"/Users/vbanda/Desktop/webchat-fastapi-reactjs/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  // add random cliend id by date time\n  const [clientId, setClientId] = useState(Math.floor(new Date().getTime() / 1000));\n  const [websckt, setWebsckt] = useState();\n  const [message, setMessage] = useState([]);\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    const url = \"ws://localhost:8000/ws/\" + clientId;\n    const ws = new WebSocket(url);\n\n    ws.onopen = event => {\n      ws.send(\"Connect\");\n    }; // recieve message every start page\n\n\n    ws.onmessage = e => {\n      const message = JSON.parse(e.data);\n      setMessages([...messages, message]);\n    };\n\n    setWebsckt(ws); //clean up function when we close page\n\n    return () => ws.close();\n  }, []);\n\n  const sendMessage = () => {\n    websckt.send(message); // recieve message every send message\n\n    websckt.onmessage = e => {\n      const message = JSON.parse(e.data);\n      setMessages([...messages, message]);\n    };\n\n    setMessage([]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"your client id: \", clientId, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat\",\n        children: messages.map((value, index) => {\n          if (value.clientId === clientId) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-message-container\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"client\",\n                  children: [\"client id : \", clientId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"message\",\n                  children: value.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 17\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 17\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"another-message-container\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"another-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"client\",\n                  children: [\"client id : \", clientId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 64,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"message\",\n                  children: value.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 65,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 19\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-chat-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input-chat\",\n          type: \"text\",\n          placeholder: \"Chat message ...\",\n          onChange: e => setMessage(e.target.value),\n          value: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"submit-chat\",\n          onClick: sendMessage,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Vaid+OVrRA9ZQDwrp5cymgL/yNE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","React","useState","useEffect","App","clientId","setClientId","Math","floor","Date","getTime","websckt","setWebsckt","message","setMessage","messages","setMessages","url","ws","WebSocket","onopen","event","send","onmessage","e","JSON","parse","data","close","sendMessage","map","value","index","target"],"sources":["/Users/vbanda/Desktop/webchat-fastapi-reactjs/frontend/src/App.js"],"sourcesContent":["import logo from \"./logo.svg\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\n\nfunction App() {\n  // add random cliend id by date time\n  const [clientId, setClientId] = useState(\n    Math.floor(new Date().getTime() / 1000)\n  );\n\n  const [websckt, setWebsckt] = useState();\n  const [message, setMessage] = useState([]);\n  const [messages, setMessages] = useState([]);\n\n  useEffect(() => {\n    const url = \"ws://localhost:8000/ws/\" + clientId;\n    const ws = new WebSocket(url);\n\n    ws.onopen = (event) => {\n      ws.send(\"Connect\");\n    };\n\n    // recieve message every start page\n    ws.onmessage = (e) => {\n      const message = JSON.parse(e.data);\n      setMessages([...messages, message]);\n    };\n\n    setWebsckt(ws);\n    //clean up function when we close page\n    return () => ws.close();\n  }, []);\n\n  const sendMessage = () => {\n    websckt.send(message);\n    // recieve message every send message\n    websckt.onmessage = (e) => {\n      const message = JSON.parse(e.data);\n      setMessages([...messages, message]);\n    };\n    setMessage([]);\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Chat</h1>\n      <h2>your client id: {clientId} </h2>\n      <div className=\"chat-container\">\n        <div className=\"chat\">\n          {messages.map((value, index) => {\n            if (value.clientId === clientId) {\n              return (\n                <div key={index} className=\"my-message-container\">\n                <div className=\"my-message\">\n                  <p className=\"client\">client id : {clientId}</p>\n                  <p className=\"message\">{value.message}</p>\n                </div>\n              </div>\n              );\n            } else {\n              return (\n                <div key={index} className=\"another-message-container\">\n                  <div className=\"another-message\">\n                    <p className=\"client\">client id : {clientId}</p>\n                    <p className=\"message\">{value.message}</p>\n                  </div>\n                </div>\n              );\n            }\n          })}\n        </div>\n        <div className=\"input-chat-container\">\n        <input\n            className=\"input-chat\"\n            type=\"text\"\n            placeholder=\"Chat message ...\"\n            onChange={(e) => setMessage(e.target.value)}\n            value={message}\n          ></input>\n          <button className=\"submit-chat\" onClick={sendMessage}>\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}